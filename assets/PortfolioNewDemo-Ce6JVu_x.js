import{C as e,S as t,_ as n,c as r,d as i,g as a,h as o,l as s,o as c,p as l,s as u,t as d,u as ee,v as te,x as f,y as p}from"./index-BvHIBcQ7.js";var ne={class:`p-6`},re={class:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6`},ie={class:`card-theme rounded-2xl shadow p-4 text-center`},ae={class:`text-2xl font-bold mt-2 text-[color:var(--color-primary)]`},oe={class:`card-theme rounded-2xl shadow p-4 text-center`},se={class:`card-theme rounded-2xl shadow p-4 text-center`},ce={class:`text-2xl font-bold mt-2 text-[color:var(--color-primary)]`},le={class:`card-theme rounded-2xl shadow p-4 text-center`},m={class:`text-2xl font-bold mt-2 text-[color:var(--color-primary)]`},h={class:`grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6`},g={class:`lg:col-span-1 card-theme rounded-2xl shadow p-4 space-y-4`},_={class:`flex items-center justify-between`},v={class:`text-xs text-[color:var(--color-secondary)]`},y={class:`flex flex-wrap gap-2 text-sm mt-2`},b={class:`text-[color:var(--color-secondary)]`},x={class:`ml-1 font-medium text-[color:var(--color-primary)]`},S={class:`mt-3 border-t border-[color:var(--color-border)] pt-3`},C={class:`w-full text-sm`},w={class:`py-2`},T={class:`font-medium`},E={class:`text-xs text-[color:var(--color-secondary)]`},D={class:`py-2 text-right`},O={class:`font-medium`},k={class:`text-xs text-[color:var(--color-secondary)]`},A={class:`lg:col-span-2 card-theme rounded-2xl shadow p-4`},j={class:`mt-3 grid grid-cols-2 gap-3 text-sm text-[color:var(--color-secondary)]`},M={class:`font-medium ml-2`},N={class:`text-right`},P={class:`font-medium ml-2`},F={class:`grid grid-cols-1 lg:grid-cols-2 gap-6`},I={class:`card-theme rounded-2xl shadow p-4 overflow-auto`},L={class:`w-full text-sm`},ue={key:0},R={class:`py-2`},z={class:`text-right`},B={class:`text-right`},V={class:`text-right`},H={class:`card-theme rounded-2xl shadow p-4`},U={class:`space-y-3 text-sm text-[color:var(--color-secondary)]`},de={class:`flex gap-2`},W=d({__name:`PortfolioNewDemo`,setup(d){let W=p([{symbol:`TSMC`,name:`台積電`,qty:120,price:520},{symbol:`00675L`,name:`元大孖展`,qty:80,price:35},{symbol:`2330.TW`,name:`台積電 (TW)`,qty:10,price:520}]),G=p([{time:new Date().toLocaleString(),symbol:`TSMC`,side:`Buy`,qty:50,price:510},{time:new Date(Date.now()-3600*1e3*24).toLocaleString(),symbol:`00675L`,side:`Buy`,qty:80,price:30}]),K=p(2e4),q=[`#F59E0B`,`#EF4444`,`#3B82F6`,`#60A5FA`,`#FACC15`,`#F87171`];function J(e){return e==null?`-`:`$${Number(e).toLocaleString()}`}let Y=r(()=>W.value.reduce((e,t)=>e+t.qty*t.price,0)),fe=r(()=>{let e=Y.value||1;return W.value.map(t=>{let n=t.qty*t.price;return{...t,value:n,percent:n/e*100,weight:n/(e+K.value)*100}})}),X=r(()=>fe.value.slice().sort((e,t)=>t.value-e.value)),pe=r(()=>W.value.length),me=r(()=>{let e=Y.value+K.value||1;return Y.value/e*100}),Z=r(()=>W.value.reduce((e,t)=>{let n=Math.sin(t.qty+t.price)*.005;return e+t.qty*t.price*n},0)),he=r(()=>Y.value?Z.value/Y.value*100:0),ge=r(()=>{let e=W.value.reduce((e,t)=>e+t.qty,0)||1;return W.value.reduce((e,t)=>e+t.qty*t.price,0)/e});function _e(){W.value=W.value.map(e=>{let t=1+(Math.random()-.5)*.02;return{...e,price:Number((e.price*t).toFixed(2))}})}function Q(){let e=[[`symbol`,`name`,`qty`,`price`,`value`],...W.value.map(e=>[e.symbol,e.name,e.qty,e.price,e.qty*e.price])].map(e=>e.map(e=>`"${String(e).replace(/"/g,`""`)}"`).join(`,`)).join(`
`),t=new Blob([e],{type:`text/csv;charset=utf-8;`}),n=URL.createObjectURL(t),r=document.createElement(`a`);r.href=n,r.download=`portfolio_${Date.now()}.csv`,r.click(),URL.revokeObjectURL(n)}let $=te({symbol:``,qty:0,price:0});function ve(){!$.symbol||$.qty<=0||(W.value.push({symbol:$.symbol.toUpperCase(),name:$.symbol.toUpperCase(),qty:Number($.qty),price:Number($.price)||1}),$.symbol=``,$.qty=0,$.price=0)}function ye(){let e=W.value.length?W.value[Math.floor(Math.random()*W.value.length)].symbol:`TBD`,t=Math.round((Math.random()*500+10)*100)/100,n=Math.floor(Math.random()*50)+1;G.value.unshift({time:new Date().toLocaleString(),symbol:e,side:Math.random()>.5?`Buy`:`Sell`,qty:n,price:t})}return(r,d)=>(o(),i(`div`,ne,[s(`header`,{class:`flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-6`},[d[2]||=s(`div`,null,[s(`h1`,{class:`text-2xl font-bold text-[color:var(--color-primary)]`},`Portfolio`),s(`div`,{class:`text-sm text-[color:var(--color-secondary)]`},`目前持倉總覽、權重與近期交易`)],-1),s(`div`,{class:`flex items-center gap-3`},[s(`button`,{onClick:_e,class:`px-3 py-1 rounded-md bg-[color:var(--color-primary)] text-white`},`更新價格`),s(`button`,{onClick:Q,class:`px-3 py-1 rounded-md border border-[color:var(--color-border)] bg-[color:var(--color-card)]`},`匯出 CSV`)])]),s(`div`,re,[s(`div`,ie,[d[3]||=s(`h4`,{class:`text-xs text-[color:var(--color-secondary)]`},`總市值`,-1),s(`div`,ae,e(J(Y.value)),1)]),s(`div`,oe,[d[4]||=s(`h4`,{class:`text-xs text-[color:var(--color-secondary)]`},`今日損益`,-1),s(`div`,{class:f([`text-2xl font-bold mt-2`,Z.value>=0?`text-[color:var(--color-line2)]`:`text-[color:var(--color-line3)]`])},e(J(Z.value))+` (`+e(he.value.toFixed(2))+`%) `,3)]),s(`div`,se,[d[5]||=s(`h4`,{class:`text-xs text-[color:var(--color-secondary)]`},`持股數`,-1),s(`div`,ce,e(pe.value),1)]),s(`div`,le,[d[6]||=s(`h4`,{class:`text-xs text-[color:var(--color-secondary)]`},`現金可用`,-1),s(`div`,m,e(J(K.value)),1)])]),s(`div`,h,[s(`div`,g,[s(`div`,_,[d[7]||=s(`h3`,{class:`font-medium text-[color:var(--color-secondary)]`},`持股比例`,-1),s(`div`,v,`總市值 `+e(J(Y.value)),1)]),d[9]||=s(`div`,{class:`h-40 rounded-lg border border-[color:var(--color-border)] bg-[color:var(--color-card)] flex items-center justify-center text-[color:var(--color-secondary)] opacity-80`},` [持股比例圖 / 環形圖] `,-1),s(`ul`,y,[(o(!0),i(u,null,a(X.value,(n,r)=>(o(),i(`li`,{key:n.symbol,class:`flex items-center gap-2`},[s(`span`,{class:f([`inline-block w-3 h-3 rounded-sm`]),style:t({backgroundColor:q[r%q.length]})},null,4),s(`span`,b,e(n.symbol),1),s(`span`,x,e(n.percent.toFixed(1))+`%`,1)]))),128))]),s(`div`,S,[s(`table`,C,[d[8]||=s(`thead`,{class:`text-[color:var(--color-secondary)]`},[s(`tr`,null,[s(`th`,{class:`text-left`},`股票`),s(`th`,{class:`text-right`},`持有市值`)])],-1),s(`tbody`,null,[(o(!0),i(u,null,a(X.value,t=>(o(),i(`tr`,{key:t.symbol,class:`border-t border-[color:var(--color-border)]`},[s(`td`,w,[s(`div`,T,e(t.symbol),1),s(`div`,E,e(t.name),1)]),s(`td`,D,[s(`div`,O,e(J(t.value)),1),s(`div`,k,e(t.qty)+` 股 • `+e(t.weight.toFixed(1))+`%`,1)])]))),128))])])])]),s(`div`,A,[d[12]||=s(`div`,{class:`flex items-center justify-between mb-3`},[s(`div`,{class:`font-medium text-[color:var(--color-secondary)]`},`市值趨勢`),s(`div`,{class:`text-xs text-[color:var(--color-secondary)]`},`Period: 30D`)],-1),d[13]||=s(`div`,{class:`h-72 rounded-lg border border-[color:var(--color-border)] bg-[color:var(--color-card)] flex items-center justify-center text-[color:var(--color-secondary)] opacity-70`},` [市值 / 損益趨勢圖（placeholder）] `,-1),s(`div`,j,[s(`div`,null,[d[10]||=l(`平均成本: `,-1),s(`span`,M,e(J(ge.value)),1)]),s(`div`,N,[d[11]||=l(`持倉比: `,-1),s(`span`,P,e(me.value.toFixed(1))+`%`,1)])])])]),s(`div`,F,[s(`div`,I,[d[16]||=s(`h3`,{class:`font-medium mb-3`},`交易紀錄`,-1),s(`table`,L,[d[15]||=s(`thead`,{class:`text-[color:var(--color-secondary)]`},[s(`tr`,null,[s(`th`,{class:`text-left`},`時間`),s(`th`,{class:`text-left`},`股票`),s(`th`,{class:`text-right`},`動作`),s(`th`,{class:`text-right`},`數量`),s(`th`,{class:`text-right`},`價格`)])],-1),s(`tbody`,null,[G.value.length===0?(o(),i(`tr`,ue,[...d[14]||=[s(`td`,{colspan:`5`,class:`py-6 text-center text-[color:var(--color-secondary)]`},`尚無交易`,-1)]])):ee(``,!0),(o(!0),i(u,null,a(G.value,(t,n)=>(o(),i(`tr`,{key:n,class:`border-t border-[color:var(--color-border)]`},[s(`td`,R,e(t.time),1),s(`td`,null,e(t.symbol),1),s(`td`,z,e(t.side),1),s(`td`,B,e(t.qty),1),s(`td`,V,e(J(t.price)),1)]))),128))])])]),s(`div`,H,[d[19]||=s(`h3`,{class:`font-medium mb-3`},`動作/快速小工具`,-1),s(`div`,U,[s(`div`,null,[d[17]||=s(`label`,{class:`block text-xs mb-1`},`新增持倉 (symbol)`,-1),s(`div`,de,[n(s(`input`,{"onUpdate:modelValue":d[0]||=e=>$.symbol=e,class:`flex-1 px-3 py-1 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)]`,placeholder:`例如 TSMC`},null,512),[[c,$.symbol]]),n(s(`input`,{"onUpdate:modelValue":d[1]||=e=>$.qty=e,type:`number`,class:`w-28 px-3 py-1 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)]`,placeholder:`數量`},null,512),[[c,$.qty,void 0,{number:!0}]]),s(`button`,{onClick:ve,class:`px-3 py-1 rounded-md bg-[color:var(--color-primary)] text-white`},`加入`)])]),s(`div`,null,[s(`button`,{onClick:ye,class:`px-3 py-2 rounded-md border border-[color:var(--color-border)] bg-[color:var(--color-card)] w-full`},`模擬一筆交易 (隨機)`)]),d[18]||=s(`div`,{class:`text-xs text-[color:var(--color-secondary)]`},` Tips: 這些都屬 mock 操作，真實專案應透過後端 API / 交易系統處理。 `,-1)])])])]))}},[[`__scopeId`,`data-v-39eda114`]]);export{W as default};