import{A as e,C as t,D as n,S as r,T as i,b as a,c as o,d as s,f as c,h as l,j as u,k as d,l as f,m as p,p as m,s as h,t as g,u as _,v,w as y,x as ee,y as b}from"./index-DQIx7-PG.js";import{_ as x,g as S,h as te,m as C,o as w,r as T,s as E,t as D}from"./src-15TQJ4Ew.js";var O={class:`fixed inset-0 z-50 flex items-center justify-center`},k={class:`relative bg-[color:var(--color-card)] text-[color:var(--color-text)] rounded-lg shadow-lg w-[min(90%,900px)] p-6 z-10`},A={class:`overflow-x-auto`},j={class:`w-full text-sm border-collapse`},M={class:`py-2 px-3`},N=[`onUpdate:modelValue`],P={class:`py-2 px-3`},F=[`onUpdate:modelValue`],I={class:`py-2 px-3 text-right`},L=[`onUpdate:modelValue`],R={class:`py-2 px-3 text-right`},z=[`onUpdate:modelValue`],B={class:`py-2 px-3 text-right`},V=[`onUpdate:modelValue`],H={class:`py-2 px-3 text-right`},U=[`onClick`],W={class:`bg-[color:var(--color-border)]/20`},G={class:`py-2 px-3`},K={class:`py-2 px-3`},q={class:`py-2 px-3 text-right`},J={class:`py-2 px-3 text-right`},Y={class:`py-2 px-3 text-right`},X={class:`flex justify-end gap-2 mt-5`},Z={__name:`EditHoldingModal`,emits:[`close`],setup(e,{emit:a}){let u=x(),d=a,p=s({get:()=>u.holdingDetailsData,set:e=>u.holdingDetailsData=e}),m=n({id:``,name:``,shares:0,price:0,cost:0});function g(){m.value.id&&p.value.push({...m.value}),u.holdingDetailsData=p.value,u.recalcValues(),m.value={id:``,name:``,shares:0,price:0,cost:0},d(`close`)}function _(e){p.value.splice(e,1),u.holdingDetailsData=p.value}function v(){m.value.id&&(p.value.push({...m.value}),m.value={id:``,name:``,shares:0,price:0,cost:0})}return(e,n)=>(r(),l(`div`,O,[c(`div`,{class:`absolute inset-0 bg-black/40`,onClick:n[0]||=t=>e.$emit(`close`)}),c(`div`,k,[n[8]||=c(`h3`,{class:`text-lg font-semibold mb-4`},`ç·¨è¼¯æŒè‚¡è³‡æ–™`,-1),c(`form`,null,[c(`div`,A,[c(`table`,j,[n[7]||=c(`thead`,{class:`border-b border-[color:var(--color-border)] text-[color:var(--color-secondary)]`},[c(`tr`,null,[c(`th`,{class:`text-left py-2 px-3`},`è‚¡ç¥¨ä»£ç¢¼ (id)`),c(`th`,{class:`text-left py-2 px-3`},`è‚¡ç¥¨åç¨±`),c(`th`,{class:`text-right py-2 px-3`},`è‚¡æ•¸`),c(`th`,{class:`text-right py-2 px-3`},`ç¾åƒ¹`),c(`th`,{class:`text-right py-2 px-3`},`æˆæœ¬`),c(`th`,{class:`text-right py-2 px-3`},`æ“ä½œ`)])],-1),c(`tbody`,null,[(r(!0),l(f,null,t(p.value,(e,t)=>(r(),l(`tr`,{key:t,class:`border-b border-[color:var(--color-border)] hover:bg-[color:var(--color-border)]/30 transition`},[c(`td`,M,[i(c(`input`,{"onUpdate:modelValue":t=>e.id=t,class:`w-full border p-1 rounded`},null,8,N),[[h,e.id]])]),c(`td`,P,[i(c(`input`,{"onUpdate:modelValue":t=>e.name=t,class:`w-full border p-1 rounded`},null,8,F),[[h,e.name]])]),c(`td`,I,[i(c(`input`,{"onUpdate:modelValue":t=>e.shares=t,type:`number`,min:`0`,class:`w-full border p-1 rounded text-right`},null,8,L),[[h,e.shares,void 0,{number:!0}]])]),c(`td`,R,[i(c(`input`,{"onUpdate:modelValue":t=>e.price=t,type:`number`,step:`0.01`,class:`w-full border p-1 rounded text-right`},null,8,z),[[h,e.price,void 0,{number:!0}]])]),c(`td`,B,[i(c(`input`,{"onUpdate:modelValue":t=>e.cost=t,type:`number`,step:`0.01`,class:`w-full border p-1 rounded text-right`},null,8,V),[[h,e.cost,void 0,{number:!0}]])]),c(`td`,H,[c(`button`,{type:`button`,onClick:e=>_(t),class:`px-2 py-1 rounded border cursor-pointer hover:bg-[color:var(--color-border)]`},`ğŸ—‘ï¸`,8,U)])]))),128)),c(`tr`,W,[c(`td`,G,[i(c(`input`,{"onUpdate:modelValue":n[1]||=e=>m.value.id=e,class:`w-full border p-1 rounded`,placeholder:`æ–°è‚¡ç¥¨ä»£ç¢¼`},null,512),[[h,m.value.id]])]),c(`td`,K,[i(c(`input`,{"onUpdate:modelValue":n[2]||=e=>m.value.name=e,class:`w-full border p-1 rounded`,placeholder:`åç¨±`},null,512),[[h,m.value.name]])]),c(`td`,q,[i(c(`input`,{"onUpdate:modelValue":n[3]||=e=>m.value.shares=e,type:`number`,class:`w-full border p-1 rounded text-right`},null,512),[[h,m.value.shares,void 0,{number:!0}]])]),c(`td`,J,[i(c(`input`,{"onUpdate:modelValue":n[4]||=e=>m.value.price=e,type:`number`,step:`0.01`,class:`w-full border p-1 rounded text-right`},null,512),[[h,m.value.price,void 0,{number:!0}]])]),c(`td`,Y,[i(c(`input`,{"onUpdate:modelValue":n[5]||=e=>m.value.cost=e,type:`number`,step:`0.01`,class:`w-full border p-1 rounded text-right`},null,512),[[h,m.value.cost,void 0,{number:!0}]])]),c(`td`,{class:`py-2 px-3 text-right`},[c(`button`,{type:`button`,onClick:v,class:`px-2 py-1 rounded border cursor-pointer hover:bg-[color:var(--color-border)]`},` â• `)])])])])]),c(`div`,X,[c(`button`,{type:`button`,onClick:n[6]||=t=>e.$emit(`close`),class:`px-4 py-2 rounded border cursor-pointer hover:bg-[color:var(--color-border)] active:ring-2 active:ring-offset-1 active:ring-[var(--color-line1)] transition`},` å–æ¶ˆ `),c(`button`,{type:`button`,onClick:g,onKeyup:o(g,[`enter`]),class:`px-4 py-2 rounded border bg-[color:var(--color-primary)] text-white cursor-pointer hover:bg-[color:var(--color-line1)] active:ring-2 active:ring-offset-1 active:ring-[var(--color-line1)] transition`},` å„²å­˜ `,32)])])])]))}},Q={class:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4`},ne={class:`card-theme rounded-2xl shadow p-4 text-center`},re={class:`text-2xl font-bold mt-2 text-[color:var(--color-primary)]`},ie={class:`card-theme rounded-2xl shadow p-4 text-center`},ae={class:`text-2xl font-bold mt-2 text-[color:var(--color-line3)]`},oe={class:`card-theme rounded-2xl shadow p-4 text-center`},se={class:`card-theme rounded-2xl shadow p-4 text-center`},ce={class:`text-2xl font-bold mt-2 text-[color:var(--color-primary)]`},le={__name:`SummaryCards`,setup(e){let t=x(),n=s(()=>t.totalValue||0),i=s(()=>t.totalCost||0),a=s(()=>t.overallReturnPercent||0),o=s(()=>t.holdingDetailsData[0].stockValue/t.totalValue||0);return(e,t)=>(r(),l(`div`,Q,[c(`div`,ne,[t[0]||=c(`h3`,{class:`text-sm text-[color:var(--color-secondary)]`},`ç¸½å¸‚å€¼`,-1),c(`p`,re,`$`+u(n.value.toLocaleString()),1)]),c(`div`,ie,[t[1]||=c(`h3`,{class:`text-sm text-[color:var(--color-secondary)]`},`ç¸½æˆæœ¬`,-1),c(`p`,ae,`$`+u(i.value.toLocaleString()),1)]),c(`div`,oe,[t[2]||=c(`h3`,{class:`text-sm text-[color:var(--color-secondary)]`},`ç¸½å ±é…¬ç‡`,-1),c(`p`,{class:d([`text-2xl font-bold mt-2`,[a.value<0?`text-[color:var(--color-line3)]`:`text-[color:var(--color-line2)]`]])},u(a.value<0?``:`+`)+u((a.value*100).toFixed(2))+`% `,3)]),c(`div`,se,[t[3]||=c(`h3`,{class:`text-sm text-[color:var(--color-secondary)]`},`ç¾é‡‘æ¯”ä¾‹`,-1),c(`p`,ce,u((o.value*100).toFixed(2))+`%`,1)])]))}},ue={class:`lg:col-span-1 card-theme rounded-2xl shadow p-4`},de={class:`h-40 w-40 flex items-center justify-center`},fe={class:`flex-1`},pe={class:`space-y-2 text-sm`},me=[`onClick`],he={class:`flex items-center gap-3`},ge={class:`font-medium`},_e={class:`text-xs text-[color:var(--color-secondary)]`},ve={class:`text-right`},ye={class:`font-medium text-[color:var(--color-primary)]`},be={class:`text-xs text-[color:var(--color-secondary)]`},xe={__name:`ShareholdingRatioChart`,setup(i){let o=x(),d=n(null),p=n(null),m=n(null),h=n(null),g=s(()=>o.holdingDetailsData.map(e=>({id:e.id,name:e.name,stockValue:Number(e.stockValue??e.shares*e.price??0)}))),_=s(()=>g.value.filter(e=>Number(e.stockValue)>0).sort((e,t)=>t.stockValue-e.stockValue)),v=s(()=>_.value.reduce((e,t)=>e+t.stockValue,0)),O=e=>new Intl.NumberFormat().format(Math.round(e)),k=e=>v.value?(e/v.value*100).toFixed(2):`0.00`;function A(e){let t=w;return t[e%t.length]}function j(){if(!p.value||!d.value)return;let e=_.value,t=d.value.getBoundingClientRect(),n=Math.min(160,t.width*.48),r=n,i=n,a=Math.min(r,i)/2,o=S(p.value);o.selectAll(`*`).remove(),o.attr(`viewBox`,`0 0 ${r} ${i}`).attr(`preserveAspectRatio`,`xMidYMid meet`);let s=o.append(`g`).attr(`transform`,`translate(${r/2}, ${i/2})`);if(!e.length){s.append(`text`).attr(`text-anchor`,`middle`).attr(`dy`,`0.35em`).text(`No data`).style(`fill`,`var(--color-secondary)`);return}let c=D().sort(null).value(e=>e.stockValue)(e),l=a*.95,u=a*.58,f=T().innerRadius(u).outerRadius(l).cornerRadius(4),m=e.map(e=>e.id),g=E().domain(m).range(w);s.selectAll(`path`).data(c).enter().append(`path`).attr(`d`,f).attr(`fill`,e=>C(g(e.data.id)).copy({opacity:h.value&&h.value!==e.data.id?.45:1})).attr(`stroke`,`var(--color-card)`).attr(`stroke-width`,1).style(`cursor`,`pointer`).on(`mousemove`,(e,t)=>{M(e,t),S(e.currentTarget).attr(`opacity`,.9)}).on(`mouseout`,e=>{N(),S(e.currentTarget).attr(`opacity`,1)}).on(`click`,(e,t)=>{h.value=h.value===t.data.id?null:t.data.id,j()}),s.append(`text`).attr(`text-anchor`,`middle`).style(`font-size`,`22px`).style(`fill`,`var(--color-secondary)`).text(`æŒå€‰`),s.append(`text`).attr(`text-anchor`,`middle`).attr(`dy`,`1.6em`).style(`font-size`,`12px`).style(`font-weight`,`bold`).style(`fill`,`var(--color-primary)`).text(`$${O(v.value)}`)}function M(e,t){if(!m.value)return;let n=m.value,[r,i]=te(e,d.value);n.style.left=`${r+18}px`,n.style.top=`${i+18}px`,n.innerHTML=`
    <div class="font-semibold">${t.data.name}</div>
    <div class="text-[13px] mt-1">${O(t.data.stockValue)} å…ƒ</div>
    <div class="text-[12px] text-[color:var(--color-secondary)] mt-0.5">${(t.data.stockValue/v.value*100).toFixed(2)}%</div>
  `,n.classList.remove(`hidden`)}function N(){m.value&&m.value.classList.add(`hidden`)}function P(e){h.value=h.value===e?null:e,j()}let F=null,I=null;return ee(()=>{b(()=>{j()}),I=y([_,()=>v.value],()=>{j()}),d.value&&window.ResizeObserver&&(F=new ResizeObserver(()=>{j()}),F.observe(d.value))}),a(()=>{F&&F.disconnect(),I&&I()}),(n,i)=>(r(),l(`div`,ue,[i[0]||=c(`h3`,{class:`font-medium text-[color:var(--color-secondary)] mb-2`},`è³‡ç”¢åˆ†å¸ƒï¼ˆç¾é‡‘ã€æŒè‚¡ã€èè³‡ç­‰æ¯”ä¾‹ï¼‰`,-1),c(`div`,{ref_key:`container`,ref:d,class:`flex items-center gap-4 relative flex-col xl:flex-row`},[c(`div`,de,[(r(),l(`svg`,{ref_key:`svgRef`,ref:p,class:`w-full h-full`},null,512))]),c(`div`,fe,[c(`ul`,pe,[(r(!0),l(f,null,t(_.value,(t,n)=>(r(),l(`li`,{key:t.id,onClick:e=>P(t.id),class:`flex items-center justify-between cursor-pointer`},[c(`div`,he,[c(`span`,{class:`w-3 h-3 rounded-sm`,style:e({backgroundColor:A(n)})},null,4),c(`div`,null,[c(`div`,ge,u(t.name),1),c(`div`,_e,u(t.id),1)])]),c(`div`,ve,[c(`div`,ye,u(k(t.stockValue))+`% `,1),c(`div`,be,` $`+u(O(t.stockValue)),1)])],8,me))),128))])]),c(`div`,{ref_key:`tooltip`,ref:m,class:`bg-[color:var(--color-card)] border border-[color:var(--color-border)] py-2 px-2.5 rounded-md shadow-lg z-50 min-w-24 hidden absolute pointer-events-none text-sm`},null,512)],512)]))}},Se={},Ce={class:`lg:col-span-2 card-theme rounded-2xl shadow p-4`};function we(e,t){return r(),l(`div`,Ce,[...t[0]||=[c(`h3`,{class:`font-medium mb-3`},`ğŸ“ˆ è³‡ç”¢è®ŠåŒ–`,-1),c(`div`,{class:`h-56 flex items-center justify-center text-[color:var(--color-secondary)] opacity-70`},` [è³‡ç”¢è®ŠåŒ–åœ–é ç•™å€] `,-1)]])}var Te=g(Se,[[`render`,we]]),Ee={class:`card-theme rounded-2xl shadow p-4`},De={class:`overflow-x-auto`},Oe={class:`w-full text-sm border-collapse`},ke=[`id`],Ae={class:`py-2 pr-3 font-medium`},je={class:`text-right py-2 px-3`},Me={class:`text-right py-2 px-3`},Ne={class:`text-right py-2 px-3`},Pe={class:`text-right py-2 px-3`},$={class:`text-right py-2 px-3`},Fe=[`onClick`],Ie=[`onClick`],Le={__name:`HoldingDetails`,setup(e){let n=x(),i=s(()=>{let e=n.totalValue||1;return n.holdingDetailsData.map(t=>({...t,ratio:e?t.stockValue/e:0}))});function a(e){confirm(`ç¢ºå®šåˆªé™¤`)&&n.removeHolding(e)}return(e,n)=>(r(),l(`div`,Ee,[n[1]||=c(`div`,{class:`flex items-center mb-3`},[c(`h3`,{class:`font-medium mb-3 text-[color:var(--color-secondary)]`},`æŒè‚¡æ˜ç´°`)],-1),c(`div`,De,[c(`table`,Oe,[n[0]||=c(`thead`,{class:`border-b border-[color:var(--color-border)] text-[color:var(--color-secondary)]`},[c(`tr`,null,[c(`th`,{class:`text-left py-2 pr-3`},`è‚¡ç¥¨åç¨±`),c(`th`,{class:`text-right py-2 px-3`},`è³‡é‡‘æ¯”ä¾‹`),c(`th`,{class:`text-right py-2 px-3`},`ç¾åƒ¹`),c(`th`,{class:`text-right py-2 px-3`},`æˆæœ¬`),c(`th`,{class:`text-right py-2 px-3`},`å ±é…¬ç‡`),c(`th`,{class:`text-right py-2 px-3`},`å¸‚å€¼`),c(`th`,{class:`text-right py-2 px-3`},`æ“ä½œ`)])],-1),c(`tbody`,null,[(r(!0),l(f,null,t(i.value,t=>(r(),l(`tr`,{id:t.id,class:`hover:bg-[color:var(--color-border)]/30 transition`},[c(`td`,Ae,u(t.name)+` (`+u(t.id)+`)`,1),c(`td`,je,u((t.ratio*100).toFixed(2))+`%`,1),c(`td`,Me,`$`+u((t.price||0).toLocaleString()),1),c(`td`,Ne,`$`+u((t.cost||0).toLocaleString()),1),c(`td`,{class:d([`text-right py-2 px-3`,[t.cost>t.price?`text-[color:var(--color-line3)]`:`text-[color:var(--color-line2)]`]])},u(t.cost>t.price?``:`+`)+u(((t.price-t.cost)/t.cost*100).toFixed(2))+`% `,3),c(`td`,Pe,`$`+u((t.stockValue||0).toLocaleString()),1),c(`td`,$,[c(`button`,{onClick:n=>e.$emit(`edit-holding`,t),class:`px-2 py-1 mr-2 rounded border border-theme hover:border-[color:var(--color-primary)] cursor-pointer`},` âœï¸ `,8,Fe),c(`button`,{onClick:e=>a(t.id),class:`px-2 py-1 rounded border border-theme hover:border-[color:var(--color-primary)] cursor-pointer`},` ğŸ—‘ï¸ `,8,Ie)])],8,ke))),256))])])])]))}},Re={class:`p-6 space-y-6`},ze={class:`flex items-center justify-between`},Be={class:`grid grid-cols-1 lg:grid-cols-3 gap-6`},Ve={__name:`Portfolio`,setup(e){let t=n(!1);return(e,n)=>(r(),l(`div`,Re,[c(`div`,ze,[n[3]||=c(`h2`,{class:`text-2xl font-bold text-[color:var(--color-primary)]`},`ğŸ’¼ æˆ‘çš„æŠ•è³‡çµ„åˆ`,-1),c(`button`,{onClick:n[0]||=e=>t.value=!t.value,class:`px-4 py-2 rounded-lg border border-[color:var(--color-border)] bg-[color:var(--color-card)] hover:bg-[color:var(--color-border)] active:ring-2 active:ring-offset-1 active:ring-[var(--color-line1)] transition text-sm cursor-pointer`},` â• ç·¨è¼¯æ•¸æ“š `)]),(r(),m(_,{to:`body`},[t.value?(r(),m(Z,{key:0,onClose:n[1]||=e=>t.value=!t.value})):p(``,!0)])),v(le),c(`div`,Be,[v(xe),v(Te)]),v(Le,{onEditHolding:n[2]||=e=>t.value=!t.value}),n[4]||=c(`div`,{class:`text-xs text-[color:var(--color-secondary)] text-right`},` è³‡æ–™ç‚ºç¤ºæ„ç”¨é€”ï¼Œå¯¦éš›æ•¸æ“šè«‹ä»¥æœ€æ–°æŒè‚¡ç´€éŒ„ç‚ºæº–ã€‚ `,-1)]))}};export{Ve as default};