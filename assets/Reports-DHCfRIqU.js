import{C as e,T as t,b as n,d as r,f as i,i as ee,k as a,l as o,m as s,o as te,p as c,s as l,w as u,x as d}from"./index-BsVPBOLV.js";var ne={class:`p-6`},re={class:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6`},ie={class:`flex flex-col sm:flex-row gap-3`},ae={class:`flex items-center gap-2`},oe=[`value`],se={class:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6`},ce={class:`card-theme rounded-2xl shadow p-4 text-center`},le={class:`text-lg font-bold mt-2 text-[color:var(--color-primary)]`},ue={class:`text-xs text-[color:var(--color-secondary)] mt-1`},de={class:`card-theme rounded-2xl shadow p-4 text-center`},fe={class:`text-lg font-bold mt-2 text-[color:var(--color-line2)]`},f={class:`card-theme rounded-2xl shadow p-4 text-center`},p={class:`text-lg font-bold mt-2 text-[color:var(--color-line3)]`},m={class:`card-theme rounded-2xl shadow p-4 text-center`},h={class:`text-lg font-bold mt-2 text-[color:var(--color-primary)]`},g={class:`grid grid-cols-1 lg:grid-cols-3 gap-6`},_={class:`lg:col-span-2 card-theme rounded-2xl shadow p-4`},v={class:`flex items-center justify-between mb-3`},y={class:`flex items-center gap-2`},b=[`disabled`],x=[`disabled`],S={class:`border border-[color:var(--color-border)] rounded-lg p-4 min-h-[220px]`},C={class:`mb-4`},w={class:`font-medium text-[color:var(--color-primary)]`},T={class:`text-xs text-[color:var(--color-secondary)] mt-1`},E={class:`mt-4`},D={class:`overflow-auto max-h-40 border border-[color:var(--color-border)] rounded-md`},O={class:`w-full text-sm`},k={class:`px-2 py-2`},A={class:`px-2 py-2 text-right`},j={class:`px-2 py-2 text-right`},M={key:1,class:`h-full flex items-center justify-center text-[color:var(--color-secondary)] opacity-70`},N={class:`card-theme rounded-2xl shadow p-4 space-y-4`},P={class:`space-y-2`},F={class:`text-sm font-medium`},I={class:`text-xs text-[color:var(--color-secondary)]`},L={class:`flex items-center gap-2`},R=[`onClick`],z=[`onClick`],B={key:0,class:`text-sm text-[color:var(--color-secondary)]`},V={class:`border-t border-[color:var(--color-border)] pt-4`},pe={class:`space-y-2`},me={class:`font-medium`},he={class:`text-xs text-[color:var(--color-secondary)]`},ge={class:`flex items-center gap-2`},_e=[`onClick`],ve={class:`inline-flex items-center gap-2`},ye=[`onUpdate:modelValue`],be={class:`text-xs text-[color:var(--color-secondary)]`},xe={key:0,class:`text-sm text-[color:var(--color-secondary)]`},Se={class:`card-theme rounded-2xl shadow p-4 mt-6`},Ce={class:`flex items-center justify-between`},we={class:`flex items-center gap-2`},Te={__name:`Reports`,setup(Te){let H=[{id:`summary`,name:`Summary（總覽）`},{id:`positions`,name:`Positions（持倉明細）`},{id:`trades`,name:`Trades（交易紀錄）`}],U=t(``),W=t(``),G=t(H[0].id),K=t(12),q=t([{name:`Daily Summary 2025-10-10`,date:`2025-10-10 09:12`},{name:`Monthly Positions 2025-09`,date:`2025-09-30 18:01`}]),J=u([{id:`s1`,name:`每日 08:00 匯出總覽`,frequency:`Daily`,template:`Summary`,enabled:!0},{id:`s2`,name:`每月 1 號報表`,frequency:`Monthly`,template:`Positions`,enabled:!1}]),Y=t(null),X=t(`0.18s`),Z=t(null);function Ee(){let e=new Date,t={id:`r-${e.getTime()}`,name:`${H.find(e=>e.id===G.value).name} ${e.toLocaleString()}`,date:e.toLocaleString(),rows:Array.from({length:20}).map((e,t)=>({ticker:[`2330.TW`,`0050.TW`,`00675L`][t%3]+(t+1),marketValue:`$${(Math.round(Math.random()*9e4)+1e4).toLocaleString()}`,pnl:`${(Math.random()*6-3).toFixed(2)}%`}))};Z.value=t,Y.value={name:t.name,date:t.date},q.value.unshift({name:t.name,date:t.date}),q.value.length>8&&q.value.pop(),K.value++,X.value=`${(Math.random()*.5+.05).toFixed(2)}s`}function Q(e){if(!e)return alert(`沒有可匯出的報表`);alert(`開始下載 CSV：${e.name}`)}function $(e){if(!e)return alert(`沒有可匯出的報表`);alert(`開始下載 PDF：${e.name}`)}function De(e){alert(`排程立即執行：${e.name}`)}function Oe(e){let t=e.target.files?.[0];t&&alert(`已上傳檔案：${t.name}（此為 demo，不會進行解析）`)}function ke(){alert(`開啟模板編輯器（demo）`)}return(t,u)=>(n(),c(`div`,ne,[r(`div`,re,[u[7]||=r(`div`,null,[r(`h1`,{class:`text-2xl font-bold text-[color:var(--color-primary)]`},`📊 報表管理`),r(`p`,{class:`text-sm text-[color:var(--color-secondary)] mt-1`},`建立、排程與匯出投資/績效相關的報表。`)],-1),r(`div`,ie,[r(`div`,ae,[u[5]||=r(`label`,{class:`text-xs text-[color:var(--color-secondary)]`},`日期區間`,-1),e(r(`input`,{type:`date`,"onUpdate:modelValue":u[0]||=e=>U.value=e,class:`px-2 py-1 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)] text-[color:var(--color-text)]`},null,512),[[l,U.value]]),u[6]||=r(`span`,{class:`mx-1 text-sm text-[color:var(--color-secondary)]`},`—`,-1),e(r(`input`,{type:`date`,"onUpdate:modelValue":u[1]||=e=>W.value=e,class:`px-2 py-1 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)] text-[color:var(--color-text)]`},null,512),[[l,W.value]])]),e(r(`select`,{"onUpdate:modelValue":u[2]||=e=>G.value=e,class:`px-3 py-1 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)] text-[color:var(--color-text)]`},[(n(),c(o,null,d(H,e=>r(`option`,{key:e.id,value:e.id},a(e.name),9,oe)),64))],512),[[te,G.value]]),r(`button`,{onClick:Ee,class:`px-4 py-2 rounded-lg bg-[color:var(--color-primary)] text-white hover:brightness-95 transition`},` 產生報表 `)])]),r(`div`,se,[r(`div`,ce,[u[8]||=r(`h3`,{class:`text-sm text-[color:var(--color-secondary)]`},`上次產生`,-1),r(`p`,le,a(Y.value?.name??`尚未產生`),1),r(`p`,ue,a(Y.value?.date??`-`),1)]),r(`div`,de,[u[9]||=r(`h3`,{class:`text-sm text-[color:var(--color-secondary)]`},`累計匯出次數`,-1),r(`p`,fe,a(K.value),1)]),r(`div`,f,[u[10]||=r(`h3`,{class:`text-sm text-[color:var(--color-secondary)]`},`預排任務`,-1),r(`p`,p,a(J.length),1)]),r(`div`,m,[u[11]||=r(`h3`,{class:`text-sm text-[color:var(--color-secondary)]`},`最後運行耗時`,-1),r(`p`,h,a(X.value),1)])]),r(`div`,g,[r(`div`,_,[r(`div`,v,[u[12]||=r(`h3`,{class:`font-medium text-[color:var(--color-primary)]`},`報表預覽`,-1),r(`div`,y,[r(`button`,{onClick:u[3]||=e=>Q(Z.value),disabled:!Z.value,class:`px-3 py-1 rounded-md border border-[color:var(--color-border)] bg-[color:var(--color-card)] text-sm hover:bg-[color:var(--color-border)] transition disabled:opacity-50`},` 匯出 CSV `,8,b),r(`button`,{onClick:u[4]||=e=>$(Z.value),disabled:!Z.value,class:`px-3 py-1 rounded-md bg-[color:var(--color-primary)] text-white text-sm hover:brightness-95 transition disabled:opacity-50`},` 匯出 PDF `,8,x)])]),r(`div`,S,[Z.value?(n(),c(o,{key:0},[r(`div`,C,[u[13]||=r(`div`,{class:`text-sm text-[color:var(--color-secondary)]`},`報表名稱`,-1),r(`div`,w,a(Z.value.name),1),r(`div`,T,`產生時間：`+a(Z.value.date),1)]),u[16]||=s(`<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-3 bg-[color:var(--color-card)] rounded-md"><div class="text-xs text-[color:var(--color-secondary)]">總市值（區間）</div><div class="text-lg font-bold text-[color:var(--color-primary)]">$1,234,567</div></div><div class="p-3 bg-[color:var(--color-card)] rounded-md"><div class="text-xs text-[color:var(--color-secondary)]">總損益</div><div class="text-lg font-bold text-[color:var(--color-line2)]">+3.2%</div></div></div>`,1),r(`div`,E,[u[15]||=r(`h4`,{class:`text-sm font-medium text-[color:var(--color-secondary)] mb-2`},`樣本資料（摘錄）`,-1),r(`div`,D,[r(`table`,O,[u[14]||=r(`thead`,{class:`bg-[color:var(--color-card)] sticky top-0`},[r(`tr`,null,[r(`th`,{class:`text-left px-2 py-1 text-[color:var(--color-secondary)]`},`Ticker`),r(`th`,{class:`text-right px-2 py-1 text-[color:var(--color-secondary)]`},`市值`),r(`th`,{class:`text-right px-2 py-1 text-[color:var(--color-secondary)]`},`損益%`)])],-1),r(`tbody`,null,[(n(!0),c(o,null,d(Z.value.rows.slice(0,6),e=>(n(),c(`tr`,{key:e.ticker,class:`odd:bg-transparent even:bg-[color:var(--color-border)]`},[r(`td`,k,a(e.ticker),1),r(`td`,A,a(e.marketValue),1),r(`td`,j,a(e.pnl),1)]))),128))])])])])],64)):(n(),c(`div`,M,` 尚未產生報表 — 按上方「產生報表」開始。 `))])]),r(`div`,N,[u[18]||=r(`h3`,{class:`font-medium text-[color:var(--color-primary)]`},`最近匯出`,-1),r(`ul`,P,[(n(!0),c(o,null,d(q.value,(e,t)=>(n(),c(`li`,{key:t,class:`flex items-center justify-between p-2 rounded-md hover:bg-[color:var(--color-border)] transition`},[r(`div`,null,[r(`div`,F,a(e.name),1),r(`div`,I,a(e.date),1)]),r(`div`,L,[r(`button`,{onClick:t=>Q(e),class:`px-2 py-1 text-xs rounded border border-[color:var(--color-border)] bg-[color:var(--color-card)]`},`CSV`,8,R),r(`button`,{onClick:t=>$(e),class:`px-2 py-1 text-xs rounded bg-[color:var(--color-primary)] text-white`},`PDF`,8,z)])]))),128)),q.value.length===0?(n(),c(`li`,B,`目前沒有匯出紀錄`)):i(``,!0)]),r(`div`,V,[u[17]||=r(`h3`,{class:`font-medium mb-2 text-[color:var(--color-primary)]`},`排程任務`,-1),r(`ul`,pe,[(n(!0),c(o,null,d(J,t=>(n(),c(`li`,{key:t.id,class:`flex items-center justify-between p-2 rounded-md hover:bg-[color:var(--color-border)] transition`},[r(`div`,null,[r(`div`,me,a(t.name),1),r(`div`,he,`頻率：`+a(t.frequency)+` • 模板：`+a(t.template),1)]),r(`div`,ge,[r(`button`,{onClick:e=>De(t),class:`px-2 py-1 text-xs rounded border border-[color:var(--color-border)] bg-[color:var(--color-card)]`},`立即執行`,8,_e),r(`label`,ve,[e(r(`input`,{type:`checkbox`,"onUpdate:modelValue":e=>t.enabled=e,class:`rounded`},null,8,ye),[[ee,t.enabled]]),r(`span`,be,a(t.enabled?`啟用`:`停用`),1)])])]))),128)),J.length===0?(n(),c(`li`,xe,`尚未建立排程`)):i(``,!0)])])])]),r(`div`,Se,[r(`div`,Ce,[u[19]||=r(`h3`,{class:`font-medium text-[color:var(--color-primary)]`},`報表模板 & 匯入`,-1),r(`div`,we,[r(`input`,{type:`file`,onChange:Oe,class:`text-sm`},null,32),r(`button`,{onClick:ke,class:`px-3 py-1 rounded-md bg-[color:var(--color-primary)] text-white text-sm`},`建立/編輯模板`)])]),u[20]||=r(`div`,{class:`mt-4 text-sm text-[color:var(--color-secondary)]`},` 模板可以指定欄位、排序與篩選設定；匯入外部 CSV 可以快速建立報表來源資料。 `,-1)])]))}};export{Te as default};