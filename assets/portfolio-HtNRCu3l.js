import{A as e,D as t,a as n,m as r}from"./index-CeXoJVSv.js";const i=[{id:null,name:`現金`,shares:1,price:32634,cost:32634},{id:`2330.TW`,name:`台積電`,shares:167,price:1450,cost:899.31},{id:`00757.TW`,name:`統一FANG+`,shares:934,price:116,cost:100},{id:`00675L.TW`,name:`富邦臺灣加權正二`,shares:5835,price:130.2,cost:81.01},{id:`00713.TW`,name:`元大台灣高息低波`,shares:422,price:51.4,cost:53.51}];var a=`myStockMap_holdings`;const o=n(`portfolio`,()=>{let n=localStorage.getItem(a),o=e(n?JSON.parse(n):i);function s(){o.value.forEach(e=>{e.id=e.id||null,e.name=e.name||e.id,e.shares=Number(e.shares)||0,e.price=Number(e.price)||0,e.cost=Number(e.cost)||0,e.stockValue=Number(e.shares*e.price||0)})}s(),t(o,e=>{try{localStorage.setItem(a,JSON.stringify(e))}catch(e){console.warn(`存 localStorage 失敗`,e)}},{deep:!0});function c(e){let t=o.value.findIndex(t=>t.id===e.id),n={id:e.id,name:e.name||e.id,shares:Number(e.shares)||0,price:Number(e.price)||0,cost:Number(e.cost)||0};n.stockValue=n.shares*n.price,t===-1?o.value.push(n):o.value[t]={...o.value[t],...n}}function l(e){o.value=o.value.filter(t=>t.id!==e)}function u(){o.value=[]}let d=r(()=>o.value.reduce((e,t)=>e+(Number(t.stockValue)||0),0)),f=r(()=>o.value.filter(e=>e.id!==null).reduce((e,t)=>e+(Number(t.stockValue)||0),0)),p=r(()=>o.value.reduce((e,t)=>e+(Number(t.cost)*Number(t.shares)||0),0)),m=r(()=>p.value?(d.value-p.value)/p.value:0);function h(e){let t=!1;return o.value.forEach(n=>{e[n.id]!=null&&(n.price=Number(e[n.id]),n.stockValue=n.price*n.shares,t=!0)}),t}return{holdingDetailsData:o,addOrUpdateHolding:c,removeHolding:l,clearHoldings:u,recalcValues:s,updatePrices:h,totalValue:d,totalValueExCash:f,totalCost:p,overallReturnPercent:m}});export{o as t};