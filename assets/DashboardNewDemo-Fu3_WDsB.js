import{C as e,S as t,_ as n,c as r,d as i,g as a,h as o,l as s,o as ee,p as c,s as l,t as u,x as d,y as f}from"./index-BvHIBcQ7.js";var te={class:`p-6`},ne={class:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6`},re={class:`card-theme rounded-2xl shadow p-4 text-center`},ie={class:`text-2xl font-bold mt-2 text-[color:var(--color-primary)]`},ae={class:`text-sm text-[color:var(--color-secondary)] mt-1`},oe={class:`card-theme rounded-2xl shadow p-4 text-center`},se={class:`text-sm text-[color:var(--color-secondary)] mt-1`},ce={class:`card-theme rounded-2xl shadow p-4 text-center`},le={class:`text-2xl font-bold mt-2 text-[color:var(--color-line3)]`},ue={class:`card-theme rounded-2xl shadow p-4 text-center`},de={class:`text-2xl font-bold mt-2 text-[color:var(--color-primary)]`},fe={class:`text-sm text-[color:var(--color-secondary)] mt-1`},pe={class:`grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6`},me={class:`lg:col-span-1 card-theme rounded-2xl shadow p-4`},p={class:`flex items-center justify-between mb-3`},m={class:`text-xs text-[color:var(--color-secondary)]`},h={class:`flex items-center gap-4`},g={class:`w-36 h-36 flex items-center justify-center`},_={viewBox:`0 0 42 42`,class:`w-36 h-36`},v={transform:`rotate(-90 21 21)`},y=[`stroke`,`stroke-dashoffset`],b={class:`flex-1`},x={class:`space-y-2 text-sm`},S={class:`flex items-center gap-3`},C={class:`font-medium`},w={class:`text-xs text-[color:var(--color-secondary)]`},T={class:`text-right`},E={class:`font-medium text-[color:var(--color-primary)]`},D={class:`text-xs text-[color:var(--color-secondary)]`},O={class:`lg:col-span-2 card-theme rounded-2xl shadow p-4`},k={class:`h-44 w-full rounded-lg border border-[color:var(--color-border)] bg-[color:var(--color-card)] p-3`},A=[`viewBox`],j=[`d`],M=[`cx`,`cy`],N={class:`mt-3 grid grid-cols-2 gap-3 text-sm text-[color:var(--color-secondary)]`},P={class:`font-medium mt-1`},F={class:`text-right`},I={class:`font-medium ml-2`},L={class:`grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6`},R={class:`lg:col-span-2 card-theme rounded-2xl shadow p-4 overflow-auto`},z={class:`w-full text-sm`},he={class:`py-3`},ge={class:`font-medium`},_e={class:`text-xs text-[color:var(--color-secondary)]`},ve={class:`py-3 text-right`},ye={class:`py-3 text-right`},be={class:`py-3 text-right font-medium`},xe={class:`py-3 text-right`},Se={class:`card-theme rounded-2xl shadow p-4`},Ce={class:`space-y-3 text-sm text-[color:var(--color-secondary)]`},we={class:`card-theme rounded-2xl shadow p-4`},Te={class:`space-y-3`},Ee={class:`text-xs text-[color:var(--color-secondary)] w-20`},De={class:`font-medium`},Oe={class:`text-xs text-[color:var(--color-secondary)]`},B=u({__name:`DashboardNewDemo`,setup(u){let B=f([{symbol:`TSMC`,name:`台積電`,qty:120,price:520,cost:480},{symbol:`00675L`,name:`元大 00675L`,qty:80,price:35,cost:31},{symbol:`2330.TW`,name:`台積電 (TW)`,qty:10,price:520,cost:500},{symbol:`AAPL`,name:`Apple`,qty:12,price:175,cost:160},{symbol:`GOOG`,name:`Google`,qty:4,price:140,cost:120}]),V=f(2e4),H=f(q(30)),U=f(12345),W=f([{date:`2025-10-07`,title:`加碼 00675L`,detail:`$5,000`},{date:`2025-10-05`,title:`台積電配息`,detail:`$1,200`}]),G=f(``);function K(e){return e==null?`-`:`$${Number(e).toLocaleString()}`}function q(e=30){let t=[],n=1e3;for(let r=0;r<e;r++)n*=1+(Math.random()-.48)*.02,t.push(Number(n.toFixed(2)));return t}let J=r(()=>{let e=B.value.reduce((e,t)=>e+t.qty*t.price,0);return B.value.map(t=>{let n=t.qty*t.price,r=e?n/e*100:0,i=(t.price-(t.cost||t.price))*t.qty;return{...t,value:n,percent:r,pnl:i,weight:r}})}),Y=r(()=>J.value.slice().sort((e,t)=>t.value-e.value)),X=r(()=>J.value.reduce((e,t)=>e+t.value,0)),ke=r(()=>B.value.length),Ae=r(()=>{let e=X.value+V.value;return e?X.value/e*100:0}),Z=r(()=>B.value.reduce((e,t)=>{let n=Math.sin(t.qty+t.price)*.005;return e+t.qty*t.price*n},0)),je=r(()=>X.value?Z.value/X.value*100:0),Me=r(()=>{let e=H.value;if(e.length<8)return 0;let t=e[e.length-1],n=e[e.length-8];return(t-n)/n*100}),Ne=r(()=>{let e=H.value;if(e.length<2)return 0;let t=e[e.length-1],n=e[e.length-2];return(t-n)/n*100}),Q=[`#F59E0B`,`#EF4444`,`#3B82F6`,`#60A5FA`,`#FACC15`,`#F87171`],Pe=r(()=>{let e=X.value||1,t=0;return Y.value.map(n=>{let r=n.value/e*100,i=100-r-t;return t+=r,{percent:r,offset:Math.max(0,i)}})}),$=r(()=>`0 0 ${H.value.length} 100`),Fe=r(()=>{let e=H.value;if(!e.length)return``;let t=Math.min(...e),n=Math.max(...e)-t||1;return e.length-1,`M ${e.map((e,r)=>{let i=100-(e-t)/n*90-5;return`${r},${i}`}).join(` L `)}`});function Ie(){let e=[[`symbol`,`name`,`qty`,`price`,`value`]];for(let t of B.value)e.push([t.symbol,t.name,t.qty,t.price,t.qty*t.price]);return e}function Le(){B.value=B.value.map(e=>{let t=1+(Math.random()-.5)*.02;return{...e,price:Number((e.price*t).toFixed(2))}}),H.value=q(30),U.value=Math.round(Math.random()*2e4+5e3)}function Re(){B.value.forEach((e,t)=>{B.value[t].price=Number((e.price*(1+(Math.random()-.5)*.08)).toFixed(2))}),H.value=q(30),U.value=Math.round(Math.random()*2e4+1e3)}function ze(){let e=Ie().map(e=>e.map(e=>`"${String(e).replace(/"/g,`""`)}"`).join(`,`)).join(`
`),t=new Blob([e],{type:`text/csv;charset=utf-8;`}),n=URL.createObjectURL(t),r=document.createElement(`a`);r.href=n,r.download=`dashboard_positions_${Date.now()}.csv`,r.click(),URL.revokeObjectURL(n)}function Be(){let e=[`MSFT`,`NFLX`,`TSMC`,`2330.TW`,`AAPL`,`00675L`],t=e[Math.floor(Math.random()*e.length)];B.value.push({symbol:t,name:t,qty:Math.floor(Math.random()*200)+1,price:Number((Math.random()*500+20).toFixed(2)),cost:Number((Math.random()*400+20).toFixed(2))})}function Ve(){W.value.unshift({date:new Date().toLocaleDateString(),title:`模擬成交`,detail:`隨機新增持倉 ${Math.floor(Math.random()*100)} 股`})}return(r,u)=>(o(),i(`div`,te,[s(`header`,{class:`flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-6`},[u[1]||=s(`div`,null,[s(`h1`,{class:`text-2xl font-bold text-[color:var(--color-primary)]`},`Dashboard`),s(`div`,{class:`text-sm text-[color:var(--color-secondary)]`},`一覽帳戶關鍵指標與視覺化趨勢`)],-1),s(`div`,{class:`flex items-center gap-3`},[s(`button`,{onClick:Le,class:`px-3 py-1 rounded-md bg-[color:var(--color-primary)] text-white`},`更新價格`),s(`button`,{onClick:Re,class:`px-3 py-1 rounded-md border border-[color:var(--color-border)] bg-[color:var(--color-card)]`},`模擬波動`),s(`button`,{onClick:ze,class:`px-3 py-1 rounded-md border border-[color:var(--color-border)] bg-[color:var(--color-card)]`},`匯出 CSV`)])]),s(`div`,ne,[s(`div`,re,[u[2]||=s(`h4`,{class:`text-xs text-[color:var(--color-secondary)]`},`總市值`,-1),s(`div`,ie,e(K(X.value)),1),s(`div`,ae,`持倉：`+e(Ae.value.toFixed(1))+`%`,1)]),s(`div`,oe,[u[3]||=s(`h4`,{class:`text-xs text-[color:var(--color-secondary)]`},`今日損益`,-1),s(`div`,{class:d([`text-2xl font-bold mt-2`,Z.value>=0?`text-[color:var(--color-line2)]`:`text-[color:var(--color-line3)]`])},e(K(Z.value)),3),s(`div`,se,e(je.value.toFixed(2))+`%`,1)]),s(`div`,ce,[u[4]||=s(`h4`,{class:`text-xs text-[color:var(--color-secondary)]`},`近 7 日漲跌`,-1),s(`div`,le,e(Me.value.toFixed(2))+`%`,1),u[5]||=s(`div`,{class:`text-sm text-[color:var(--color-secondary)] mt-1`},`觀察趨勢`,-1)]),s(`div`,ue,[u[6]||=s(`h4`,{class:`text-xs text-[color:var(--color-secondary)]`},`現金 & 可用`,-1),s(`div`,de,e(K(V.value)),1),s(`div`,fe,`持倉數：`+e(ke.value),1)])]),s(`div`,pe,[s(`div`,me,[s(`div`,p,[u[7]||=s(`h3`,{class:`font-medium text-[color:var(--color-secondary)]`},`資產分布`,-1),s(`div`,m,e(K(X.value)),1)]),s(`div`,h,[s(`div`,g,[(o(),i(`svg`,_,[u[9]||=s(`defs`,null,null,-1),s(`g`,v,[u[8]||=s(`circle`,{cx:`21`,cy:`21`,r:`15.9`,fill:`transparent`,stroke:`rgba(0,0,0,0.04)`,"stroke-width":`10`},null,-1),(o(!0),i(l,null,a(Pe.value,(e,t)=>(o(),i(`circle`,{key:t,cx:`21`,cy:`21`,r:`15.9`,fill:`transparent`,stroke:Q[t%Q.length],"stroke-width":`10`,"stroke-dasharray":`100`,"stroke-dashoffset":e.offset,"stroke-linecap":`butt`,transform:`translate(0,0)`},null,8,y))),128))]),u[10]||=s(`text`,{x:`21`,y:`22`,"text-anchor":`middle`,"alignment-baseline":`middle`,class:`text-[10px] fill-[color:var(--color-secondary)]`,style:{"font-size":`8px`,fill:`var(--color-secondary)`}},` 持倉 `,-1)]))]),s(`div`,b,[s(`ul`,x,[(o(!0),i(l,null,a(Y.value.slice(0,6),(n,r)=>(o(),i(`li`,{key:n.symbol,class:`flex items-center justify-between`},[s(`div`,S,[s(`span`,{class:`w-3 h-3 rounded-sm`,style:t({backgroundColor:Q[r%Q.length]})},null,4),s(`div`,null,[s(`div`,C,e(n.symbol),1),s(`div`,w,e(n.name),1)])]),s(`div`,T,[s(`div`,E,e(K(n.value)),1),s(`div`,D,e(n.percent.toFixed(1))+`%`,1)])]))),128))])])])]),s(`div`,O,[u[13]||=s(`div`,{class:`flex items-center justify-between mb-3`},[s(`h3`,{class:`font-medium text-[color:var(--color-secondary)]`},`市值趨勢`),s(`div`,{class:`text-xs text-[color:var(--color-secondary)]`},`範圍：30 日`)],-1),s(`div`,k,[(o(),i(`svg`,{viewBox:$.value,class:`w-full h-full`},[s(`path`,{d:Fe.value,fill:`none`,stroke:`var(--color-primary)`,"stroke-width":`1.6`,"stroke-linejoin":`round`,"stroke-linecap":`round`},null,8,j),(o(!0),i(l,null,a(H.value,(e,t)=>(o(),i(`g`,{key:t},[s(`circle`,{cx:e.x,cy:e.y,r:`1.2`,fill:`var(--color-primary)`},null,8,M)]))),128))],8,A))]),s(`div`,N,[s(`div`,null,[u[11]||=c(`當日成交量（示意）`,-1),s(`div`,P,e(U.value),1)]),s(`div`,F,[u[12]||=c(`最近變動: `,-1),s(`span`,I,e(Ne.value.toFixed(2))+`%`,1)])])])]),s(`div`,L,[s(`div`,R,[u[15]||=s(`div`,{class:`flex items-center justify-between mb-3`},[s(`h3`,{class:`font-medium text-[color:var(--color-secondary)]`},`持倉明細`),s(`div`,{class:`text-xs text-[color:var(--color-secondary)]`},`資料即時性取決於 API`)],-1),s(`table`,z,[u[14]||=s(`thead`,{class:`text-[color:var(--color-secondary)]`},[s(`tr`,null,[s(`th`,{class:`text-left`},`股票`),s(`th`,{class:`text-right`},`數量`),s(`th`,{class:`text-right`},`現價`),s(`th`,{class:`text-right`},`市值`),s(`th`,{class:`text-right`},`今日損益`),s(`th`,{class:`text-right`},`權重`)])],-1),s(`tbody`,null,[(o(!0),i(l,null,a(Y.value,t=>(o(),i(`tr`,{key:t.symbol,class:`border-t border-[color:var(--color-border)]`},[s(`td`,he,[s(`div`,ge,e(t.symbol),1),s(`div`,_e,e(t.name),1)]),s(`td`,ve,e(t.qty),1),s(`td`,ye,e(K(t.price)),1),s(`td`,be,e(K(t.value)),1),s(`td`,{class:d([`py-3 text-right`,t.pnl>=0?`text-[color:var(--color-line2)]`:`text-[color:var(--color-line3)]`])},e(K(t.pnl)),3),s(`td`,xe,e(t.percent.toFixed(1))+`%`,1)]))),128))])])]),s(`div`,Se,[u[18]||=s(`h3`,{class:`font-medium mb-3`},`快速操作`,-1),s(`div`,Ce,[s(`div`,null,[u[16]||=s(`label`,{class:`block text-xs mb-1`},`搜尋股票`,-1),n(s(`input`,{"onUpdate:modelValue":u[0]||=e=>G.value=e,class:`w-full px-3 py-1 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)]`,placeholder:`例如 TSMC`},null,512),[[ee,G.value]])]),s(`div`,null,[s(`button`,{onClick:Be,class:`w-full px-3 py-2 rounded-md bg-[color:var(--color-primary)] text-white`},`新增隨機持倉`)]),s(`div`,null,[s(`button`,{onClick:Ve,class:`w-full px-3 py-2 rounded-md border border-[color:var(--color-border)] bg-[color:var(--color-card)]`},`模擬成交`)]),u[17]||=s(`div`,{class:`text-xs text-[color:var(--color-secondary)]`},` Tips: 這些操作只是前端 mock，如果接真實 API，要在後端做驗證與處理。 `,-1)])])]),s(`div`,we,[u[19]||=s(`h3`,{class:`font-medium mb-3`},`📅 最近事件`,-1),s(`ul`,Te,[(o(!0),i(l,null,a(W.value,(t,n)=>(o(),i(`li`,{key:n,class:`flex items-start gap-3`},[s(`div`,Ee,e(t.date),1),s(`div`,null,[s(`div`,De,e(t.title),1),s(`div`,Oe,e(t.detail),1)])]))),128))])])]))}},[[`__scopeId`,`data-v-b028bee8`]]);export{B as default};