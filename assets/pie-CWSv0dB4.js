import{a as e,i as t,r as n}from"./src-BawUXBCr.js";const r=Math.abs,i=Math.atan2,a=Math.cos,o=Math.max,s=Math.min,c=Math.sin,l=Math.sqrt,u=Math.PI,d=u/2,f=2*u;function p(e){return e>1?0:e<-1?u:Math.acos(e)}function m(e){return e>=1?d:e<=-1?-d:Math.asin(e)}function h(e){return e.innerRadius}function g(e){return e.outerRadius}function _(e){return e.startAngle}function v(e){return e.endAngle}function y(e){return e&&e.padAngle}function b(e,t,n,r,i,a,o,s){var c=n-e,l=r-t,u=o-i,d=s-a,f=d*c-u*l;if(!(f*f<1e-12))return f=(u*(t-a)-d*(e-i))/f,[e+f*c,t+f*l]}function x(e,t,n,r,i,a,s){var c=e-n,u=t-r,d=(s?a:-a)/l(c*c+u*u),f=d*u,p=-d*c,m=e+f,h=t+p,g=n+f,_=r+p,v=(m+g)/2,y=(h+_)/2,b=g-m,x=_-h,S=b*b+x*x,C=i-a,w=m*_-g*h,T=(x<0?-1:1)*l(o(0,C*C*S-w*w)),E=(w*x-b*T)/S,D=(-w*b-x*T)/S,O=(w*x+b*T)/S,k=(-w*b+x*T)/S,A=E-v,j=D-y,M=O-v,N=k-y;return A*A+j*j>M*M+N*N&&(E=O,D=k),{cx:E,cy:D,x01:-f,y01:-p,x11:E*(i/C-1),y11:D*(i/C-1)}}function S(){var n=h,o=g,S=e(0),C=null,w=_,T=v,E=y,D=null,O=t(k);function k(){var e,t,h=+n.apply(this,arguments),g=+o.apply(this,arguments),_=w.apply(this,arguments)-d,v=T.apply(this,arguments)-d,y=r(v-_),k=v>_;if(D||=e=O(),g<h&&(t=g,g=h,h=t),!(g>1e-12))D.moveTo(0,0);else if(y>f-1e-12)D.moveTo(g*a(_),g*c(_)),D.arc(0,0,g,_,v,!k),h>1e-12&&(D.moveTo(h*a(v),h*c(v)),D.arc(0,0,h,v,_,k));else{var A=_,j=v,M=_,N=v,P=y,F=y,I=E.apply(this,arguments)/2,L=I>1e-12&&(C?+C.apply(this,arguments):l(h*h+g*g)),R=s(r(g-h)/2,+S.apply(this,arguments)),z=R,B=R,V,H;if(L>1e-12){var U=m(L/h*c(I)),W=m(L/g*c(I));(P-=U*2)>1e-12?(U*=k?1:-1,M+=U,N-=U):(P=0,M=N=(_+v)/2),(F-=W*2)>1e-12?(W*=k?1:-1,A+=W,j-=W):(F=0,A=j=(_+v)/2)}var G=g*a(A),K=g*c(A),q=h*a(N),J=h*c(N);if(R>1e-12){var Y=g*a(j),X=g*c(j),Z=h*a(M),Q=h*c(M),$;if(y<u)if($=b(G,K,Z,Q,Y,X,q,J)){var ee=G-$[0],te=K-$[1],ne=Y-$[0],re=X-$[1],ie=1/c(p((ee*ne+te*re)/(l(ee*ee+te*te)*l(ne*ne+re*re)))/2),ae=l($[0]*$[0]+$[1]*$[1]);z=s(R,(h-ae)/(ie-1)),B=s(R,(g-ae)/(ie+1))}else z=B=0}F>1e-12?B>1e-12?(V=x(Z,Q,G,K,g,B,k),H=x(Y,X,q,J,g,B,k),D.moveTo(V.cx+V.x01,V.cy+V.y01),B<R?D.arc(V.cx,V.cy,B,i(V.y01,V.x01),i(H.y01,H.x01),!k):(D.arc(V.cx,V.cy,B,i(V.y01,V.x01),i(V.y11,V.x11),!k),D.arc(0,0,g,i(V.cy+V.y11,V.cx+V.x11),i(H.cy+H.y11,H.cx+H.x11),!k),D.arc(H.cx,H.cy,B,i(H.y11,H.x11),i(H.y01,H.x01),!k))):(D.moveTo(G,K),D.arc(0,0,g,A,j,!k)):D.moveTo(G,K),!(h>1e-12)||!(P>1e-12)?D.lineTo(q,J):z>1e-12?(V=x(q,J,Y,X,h,-z,k),H=x(G,K,Z,Q,h,-z,k),D.lineTo(V.cx+V.x01,V.cy+V.y01),z<R?D.arc(V.cx,V.cy,z,i(V.y01,V.x01),i(H.y01,H.x01),!k):(D.arc(V.cx,V.cy,z,i(V.y01,V.x01),i(V.y11,V.x11),!k),D.arc(0,0,h,i(V.cy+V.y11,V.cx+V.x11),i(H.cy+H.y11,H.cx+H.x11),k),D.arc(H.cx,H.cy,z,i(H.y11,H.x11),i(H.y01,H.x01),!k))):D.arc(0,0,h,N,M,k)}if(D.closePath(),e)return D=null,e+``||null}return k.centroid=function(){var e=(+n.apply(this,arguments)+ +o.apply(this,arguments))/2,t=(+w.apply(this,arguments)+ +T.apply(this,arguments))/2-u/2;return[a(t)*e,c(t)*e]},k.innerRadius=function(t){return arguments.length?(n=typeof t==`function`?t:e(+t),k):n},k.outerRadius=function(t){return arguments.length?(o=typeof t==`function`?t:e(+t),k):o},k.cornerRadius=function(t){return arguments.length?(S=typeof t==`function`?t:e(+t),k):S},k.padRadius=function(t){return arguments.length?(C=t==null?null:typeof t==`function`?t:e(+t),k):C},k.startAngle=function(t){return arguments.length?(w=typeof t==`function`?t:e(+t),k):w},k.endAngle=function(t){return arguments.length?(T=typeof t==`function`?t:e(+t),k):T},k.padAngle=function(t){return arguments.length?(E=typeof t==`function`?t:e(+t),k):E},k.context=function(e){return arguments.length?(D=e??null,k):D},k}function C(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function w(e){return e}function T(){var t=w,r=C,i=null,a=e(0),o=e(f),s=e(0);function c(e){var c,l=(e=n(e)).length,u,d,p=0,m=Array(l),h=Array(l),g=+a.apply(this,arguments),_=Math.min(f,Math.max(-f,o.apply(this,arguments)-g)),v,y=Math.min(Math.abs(_)/l,s.apply(this,arguments)),b=y*(_<0?-1:1),x;for(c=0;c<l;++c)(x=h[m[c]=c]=+t(e[c],c,e))>0&&(p+=x);for(r==null?i!=null&&m.sort(function(t,n){return i(e[t],e[n])}):m.sort(function(e,t){return r(h[e],h[t])}),c=0,d=p?(_-l*b)/p:0;c<l;++c,g=v)u=m[c],x=h[u],v=g+(x>0?x*d:0)+b,h[u]={data:e[u],index:c,value:x,startAngle:g,endAngle:v,padAngle:y};return h}return c.value=function(n){return arguments.length?(t=typeof n==`function`?n:e(+n),c):t},c.sortValues=function(e){return arguments.length?(r=e,i=null,c):r},c.sort=function(e){return arguments.length?(i=e,r=null,c):i},c.startAngle=function(t){return arguments.length?(a=typeof t==`function`?t:e(+t),c):a},c.endAngle=function(t){return arguments.length?(o=typeof t==`function`?t:e(+t),c):o},c.padAngle=function(t){return arguments.length?(s=typeof t==`function`?t:e(+t),c):s},c}export{S as n,T as t};