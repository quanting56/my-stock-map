import{A as e,D as t,N as n,O as r,T as i,_ as a,a as o,c as s,d as c,m as l,o as u,r as d,s as f,w as p,y as m}from"./index-L6VB4aXj.js";import{t as h}from"./displayFormat-VV-ZkTcl.js";var g=`my-stock-map:settings`,_={displayName:``,email:``,monetaryUnit:`TWD`,numberPrecision:2,reduceMotion:!1,notifyPrice:!1,notifyDaily:!1,notifyTrade:!1,notifyFrequency:`never`};function v(){try{let e=localStorage.getItem(g);if(e)return JSON.parse(e)}catch(e){console.warn(`[settings] 讀取 localStorage 失敗：`,e)}return{..._}}const y=o(`settingItems`,()=>{let e=r(v());function t(){try{localStorage.setItem(g,JSON.stringify(e))}catch(e){console.warn(`[settings] 寫入 localStorage 失敗：`,e)}}function n(){Object.assign(e,_);try{localStorage.removeItem(g)}catch(e){console.warn(`[settings] 移除 localStorage 失敗：`,e)}}return{settings:e,saveToStorage:t,reset:n}});var b={class:`p-6`},x={class:`grid grid-cols-1 lg:grid-cols-3 gap-6`},S={class:`lg:col-span-2 card-theme rounded-2xl shadow p-6 space-y-6`},C={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},w={class:`flex flex-col`},T={class:`flex flex-col`},E={class:`flex items-center gap-4 flex-wrap`},D={class:`flex items-center gap-2 ml-2`},O={class:`grid grid-cols-1 md:grid-cols-2 gap-4 opacity-25`},k={class:`flex items-center justify-between p-3 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)]`},A={class:`flex items-center justify-between p-3 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)]`},j={class:`flex items-center justify-between p-3 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)]`},M={class:`p-3 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)]`},N={class:`border-t border-[color:var(--color-border)] pt-6`},ee={class:`grid grid-cols-1 gap-3`},P={class:`px-5 py-4 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)] gap-3`},F={class:`list-disc space-y-2`},I={class:`text-xs break-all`},L={class:`card-theme rounded-2xl shadow p-4 space-y-4`},R={class:`text-sm text-[color:var(--color-secondary)] mt-2`},z={class:`font-medium`},B={class:`font-medium`},V={class:`font-medium`},H={class:`font-medium`},U={class:`font-medium`},W={class:`border-t border-[color:var(--color-border)] pt-3`},G={class:`flex flex-col gap-2 mt-2`},K={class:`inline-flex justify-center px-3 py-1 rounded-md border border-[color:var(--color-border)] bg-[color:var(--color-card)] text-sm cursor-pointer`},q={__name:`Settings`,setup(o){let g=d(),_=h(),v=y(),q=[{title:`個股股價`,apiFrom:`TWSE 證交所`,partialHyperlink:`https://www.twse.com.tw/exchangeReport/STOCK_DAY?response=`},{title:`個股基本資訊（殖利率、本益比、股價淨值比等）`,apiFrom:`TWSE 證交所`,partialHyperlink:`https://www.twse.com.tw/exchangeReport/BWIBBU?response=`},{title:`公司基本資料（公司代號、名稱、地址、資本額、發行股數等）`,apiFrom:`TWSE 證交所`,partialHyperlink:`https://openapi.twse.com.tw/v1/opendata/t18`},{title:`個股相關新聞`,apiFrom:`Google News RSS`,partialHyperlink:`https://news.google.com/rss/search?q=`},{title:`上市公司市值排名`,apiFrom:`taifex 臺灣期貨交易所`,partialHyperlink:`https://www.taifex.com.tw/cht/9/fut`},{title:`上櫃公司市值排名`,apiFrom:`證券櫃檯買賣中心`,partialHyperlink:`https://www.bq888.taifex.com.tw/cht/2/tPE`},{title:`公司基本資料（代碼、名稱、產業等）`,apiFrom:`FinMind`,partialHyperlink:`https://api.finmindtrade.com/api/v4/data?dataset=`},{title:`國內上市證券國際證券辨識號碼`,apiFrom:`TWSE 證交所`,partialHyperlink:`https://isin.twse.com.tw/isin/C_public.jsp?strMode=`},{title:`國內上櫃證券國際證券辨識號碼`,apiFrom:`TWSE 證交所`,partialHyperlink:`https://isin.twse.com.tw/isin/C_public.jsp?strMode=`}],J=r({...v.settings});function Y(){confirm(`確定要重設所有設定並清空本地儲存嗎？`)&&(v.reset(),Object.assign(J,v.settings),_.setCurrency(J.monetaryUnit),_.setCurrencyDigits(J.numberPrecision),_.setPctDigits(J.numberPrecision),alert(`已重設為預設值`))}function X(){Object.assign(v.settings,J),v.saveToStorage(),_.setCurrency(J.monetaryUnit),_.setCurrencyDigits(J.numberPrecision),_.setPctDigits(J.numberPrecision),alert(`設定已儲存（本地示範）`)}function Z(e){let t=e.target.files?.[0];if(!t)return;let n=new FileReader;n.onload=()=>{try{let e=JSON.parse(n.result);Object.assign(J,e),Object.assign(v.settings,J),v.saveToStorage(),_.setCurrency(J.monetaryUnit),_.setCurrencyDigits(J.numberPrecision),_.setPctDigits(J.numberPrecision),alert(`匯入並套用設定完成`)}catch{alert(`匯入失敗：檔案不是正確的 JSON`)}},n.readAsText(t)}function Q(){let e=JSON.stringify(J,null,2),t=new Blob([e],{type:`application/json`}),n=URL.createObjectURL(t),r=document.createElement(`a`);r.href=n,r.download=`mst-settings.json`,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function $(){alert(`登入登出功能建置中尚未啟用，待完成後接上。`)}return _.setCurrency(J.monetaryUnit),_.setCurrencyDigits(J.numberPrecision),_.setPctDigits(J.numberPrecision),(r,o)=>(p(),a(`div`,b,[l(`div`,{class:`flex items-start justify-between gap-4 mb-6`},[o[10]||=l(`div`,null,[l(`h1`,{class:`text-2xl font-bold text-[color:var(--color-primary)]`},`⚙️ 設定`),l(`p`,{class:`text-sm text-[color:var(--color-secondary)] mt-1`},`帳號、顯示、通知與整體偏好設定。`)],-1),l(`div`,{class:`flex items-center gap-3`},[l(`button`,{onClick:Y,class:`px-3 py-1 rounded-md bg-red-600 text-white text-sm hover:brightness-90 transition cursor-pointer`},` 重設全部 `)])]),l(`div`,x,[l(`div`,S,[l(`section`,null,[o[17]||=l(`h2`,{class:`text-lg font-medium text-[color:var(--color-primary)] mb-2`},`個人設定`,-1),l(`div`,C,[l(`label`,w,[o[11]||=l(`span`,{class:`text-sm text-[color:var(--color-secondary)]`},`顯示名稱`,-1),t(l(`input`,{type:`text`,"onUpdate:modelValue":o[0]||=e=>J.displayName=e,placeholder:`可輸入暱稱`,class:`px-3 py-2 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)]`},null,512),[[s,J.displayName]])]),l(`label`,T,[o[12]||=l(`span`,{class:`text-sm text-[color:var(--color-secondary)]`},`E-mail`,-1),t(l(`input`,{type:`email`,"onUpdate:modelValue":o[1]||=e=>J.email=e,placeholder:`請輸入電子郵件`,class:`px-3 py-2 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)]`},null,512),[[s,J.email]])]),l(`div`,null,[o[14]||=l(`label`,{class:`text-sm text-[color:var(--color-secondary)]`},`貨幣單位`,-1),t(l(`select`,{"onUpdate:modelValue":o[2]||=e=>J.monetaryUnit=e,class:`w-full px-3 py-2 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)]`},[...o[13]||=[l(`option`,{value:`TWD`},`新臺幣 TWD`,-1),l(`option`,{value:`USD`},`美元 USD`,-1)]],512),[[f,J.monetaryUnit]])]),l(`div`,null,[o[16]||=l(`label`,{class:`text-sm text-[color:var(--color-secondary)]`},`顯示精度`,-1),t(l(`select`,{"onUpdate:modelValue":o[3]||=e=>J.numberPrecision=e,class:`w-full px-3 py-2 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)]`},[...o[15]||=[l(`option`,{value:`0`},`整數`,-1),l(`option`,{value:`2`},`小數 2 位`,-1),l(`option`,{value:`4`},`小數 4 位`,-1)]],512),[[f,J.numberPrecision]])])])]),l(`section`,null,[o[19]||=l(`h2`,{class:`text-lg font-medium text-[color:var(--color-primary)] mb-2`},`外觀`,-1),l(`div`,E,[l(`button`,{onClick:o[4]||=(...t)=>e(g).toggleUITheme&&e(g).toggleUITheme(...t),class:`px-3 py-2 rounded-lg bg-[color:var(--color-primary)] text-white hover:brightness-95 transition cursor-pointer`},` 現在主題：`+n(e(g).isDarkMode?`夜間`:`日間`),1),l(`label`,D,[t(l(`input`,{type:`checkbox`,"onUpdate:modelValue":o[5]||=e=>J.reduceMotion=e,disabled:``},null,512),[[u,J.reduceMotion]]),o[18]||=l(`span`,{class:`text-sm text-[color:var(--color-secondary)] opacity-50`},[l(`s`,null,`減少動畫（減少動態效果）`)],-1)])])]),l(`section`,null,[o[25]||=l(`h2`,{class:`text-lg font-medium text-[color:var(--color-primary)] mb-2`},[m(` 通知 `),l(`span`,{class:`ml-3 text-xs text-[color:var(--color-secondary)]/80`},`※ 目前僅儲存偏好設定，尚未實作實際推播服務。`)],-1),l(`div`,O,[l(`label`,k,[o[20]||=l(`div`,null,[l(`div`,{class:`font-medium`},`價格提醒`),l(`div`,{class:`text-xs text-[color:var(--color-secondary)]`},`當持股達到目標價時通知您`)],-1),t(l(`input`,{type:`checkbox`,"onUpdate:modelValue":o[6]||=e=>J.notifyPrice=e,disabled:``},null,512),[[u,J.notifyPrice]])]),l(`label`,A,[o[21]||=l(`div`,null,[l(`div`,{class:`font-medium`},`每日摘要`),l(`div`,{class:`text-xs text-[color:var(--color-secondary)]`},`每日早上推播昨日總覽`)],-1),t(l(`input`,{type:`checkbox`,"onUpdate:modelValue":o[7]||=e=>J.notifyDaily=e,disabled:``},null,512),[[u,J.notifyDaily]])]),l(`label`,j,[o[22]||=l(`div`,null,[l(`div`,{class:`font-medium`},`交易異常`),l(`div`,{class:`text-xs text-[color:var(--color-secondary)]`},`監控交易失敗或拒單狀態`)],-1),t(l(`input`,{type:`checkbox`,"onUpdate:modelValue":o[8]||=e=>J.notifyTrade=e,disabled:``},null,512),[[u,J.notifyTrade]])]),l(`div`,M,[o[24]||=l(`div`,{class:`font-medium mb-1`},`推播頻率`,-1),t(l(`select`,{"onUpdate:modelValue":o[9]||=e=>J.notifyFrequency=e,disabled:``,class:`w-full px-2 py-1 rounded-md bg-[color:var(--color-card)] border border-[color:var(--color-border)]`},[...o[23]||=[l(`option`,{value:`never`},`不推播`,-1),l(`option`,{value:`realtime`},`即時`,-1),l(`option`,{value:`hourly`},`每小時`,-1),l(`option`,{value:`daily`},`每日`,-1)]],512),[[f,J.notifyFrequency]])])])]),l(`div`,{class:`flex justify-end`},[l(`button`,{onClick:X,class:`px-5 py-2 rounded-lg bg-[color:var(--color-primary)] text-white hover:brightness-95 transition cursor-pointer`},`儲存設定`)]),l(`section`,N,[o[28]||=l(`h2`,{class:`text-lg font-medium text-[color:var(--color-primary)] mb-2`},`資料來源`,-1),l(`div`,ee,[l(`div`,P,[o[27]||=l(`h3`,{class:`mb-3 font-medium`},`本網站使用之 API`,-1),l(`ul`,F,[(p(),a(c,null,i(q,(e,t)=>l(`li`,{key:t,class:`ml-4 text-sm text-[color:var(--color-secondary)]`},[m(n(e.title)+`｜`+n(e.apiFrom),1),o[26]||=l(`br`,null,null,-1),l(`span`,I,n(e.partialHyperlink)+` ...`,1)])),64))])])])])]),l(`aside`,L,[l(`div`,null,[o[34]||=l(`h3`,{class:`font-medium text-[color:var(--color-primary)]`},`當前設定`,-1),l(`div`,R,[l(`div`,null,[o[29]||=m(`顯示名稱：`,-1),l(`span`,z,n(e(v).settings.displayName||`-`),1)]),l(`div`,null,[o[30]||=m(`電子郵件：`,-1),l(`span`,B,n(e(v).settings.email||`-`),1)]),l(`div`,null,[o[31]||=m(`貨幣單位：`,-1),l(`span`,V,n(e(v).settings.monetaryUnit||`-`),1)]),l(`div`,null,[o[32]||=m(`顯示位數：`,-1),l(`span`,H,n(e(v).settings.numberPrecision==0?`整數`:`小數後 ${J.numberPrecision} 位`||`-`),1)]),l(`div`,null,[o[33]||=m(`暗色模式：`,-1),l(`span`,U,n(e(g).isDarkMode?`啟用`:`停用`),1)])])]),l(`div`,W,[o[36]||=l(`h3`,{class:`font-medium text-[color:var(--color-primary)]`},`快速匯入 / 匯出`,-1),l(`div`,G,[l(`label`,K,[o[35]||=m(` 匯入設定 `,-1),l(`input`,{type:`file`,onChange:Z,class:`hidden`},null,32)]),l(`button`,{onClick:Q,class:`px-3 py-1 rounded-md bg-[color:var(--color-primary)] text-white text-sm cursor-pointer`},`匯出設定（JSON）`)])]),l(`div`,{class:`border-t border-[color:var(--color-border)] pt-3`},[o[37]||=l(`h3`,{class:`font-medium text-[color:var(--color-primary)]`},`帳戶`,-1),l(`div`,{class:`mt-2`},[l(`button`,{onClick:$,class:`px-3 py-1 rounded-md bg-red-600 text-white text-sm cursor-pointer`},`登出`)])])])])]))}};export{q as default};